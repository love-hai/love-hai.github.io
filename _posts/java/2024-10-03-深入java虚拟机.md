---
title: 深入java虚拟机
categories: [dev]
comments: true
---

## 垃圾收集器和内存分配策略

+ 对象的自我拯救
  1. finalize()方法是对象逃脱死亡命运的最后一次机会
  2. 一个对象的finalize()方法最多只会被系统自动调用一次

+ 回收方法区
  1. 方法区的垃圾收集主要回收废弃常量和无用的类
  2. 类的卸载条件
     - 该类所有的实例都已经被回收
     - 加载该类的ClassLoader已经被回收
     - 该类对应的Class对象没有在任何地方被引用
+ 垃圾收集算法
    + 分代收集算法
      1. 新生代收集 ： 目标只是新生代的垃圾收集器
      2. 老年代收集 ： 目标只是老年代的垃圾收集器
      3. 混合收集 ： 目标是整个堆的垃圾收集器
    + 标记-清除算法
      缺点：效率低需要执行标记和清除两个过程，清除后会产生大量不连续的内存碎片
    + 复制算法（标记-复制算法）
      1. 优点：不产生内存碎片
      2. 缺点：内存利用率低，只有一半的内存可以使用
    + 标记-整理算法
        1. 优点：不产生内存碎片
        2. 缺点：需要考虑对象的移动
